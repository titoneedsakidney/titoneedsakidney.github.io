

<header>
<script src="/assets/js/lang-switch.js?v=20250905" defer></script>
  <h1>Tito Needs a Kidney</h1>
  <nav>
    <a href="/index.html">Home</a>
    <a href="/about.html">About Me</a>
    <a href="/hub/index.html">Kidney Hub</a>
    <a href="/donor-info.html">Donor Info</a>
    <a href="/donor-testimonials.html">Donor Testimonials</a>
    <a href="/book.html">Book</a>
    
  </nav>
  
  
<!-- Language switch: preserves current path, positions right, paints active -->
<div class="lang-switch" aria-label="Language">
  <a data-lang="en" href="/" class="chip">EN</a>
  <span aria-hidden="true" class="divider">/</span>
  <a data-lang="es" href="/es/" class="chip">ES</a>
</div>


<script>
// /assets/js/lang-switch.js
(function () {
  // Normalize path: collapse doubles, handle index forms, keep real page paths intact.
  function norm(p) {
    p = p || "/";
    if (p === "/index.html") p = "/";
    if (p === "/es/index.html") p = "/es/";
    p = p.replace(/\/{2,}/g, "/");
    return p;
  }

  function stripEsPrefix(p) {
    return p.replace(/^\/es(\/|$)/, "/");
  }

  function buildTargets(currentPath) {
    const p = norm(currentPath);
    const isES = p.startsWith("/es/");
    // English target: /es/foo → /foo, else stay on /foo
    let enHref = isES ? stripEsPrefix(p) : (p || "/");
    if (enHref === "") enHref = "/";

    // Spanish target: /foo → /es/foo, root → /es/
    const esHref = isES ? p : (p === "/" ? "/es/" : "/es" + p);

    return { isES, enHref, esHref };
  }

  function paintActive(isES) {
    document.querySelectorAll(".lang-switch a").forEach((el) => {
      const wantsES = el.getAttribute("data-lang") === "es";
      const active = wantsES ? isES : !isES;
      el.classList.toggle("active", active);
      el.setAttribute("aria-current", active ? "true" : "false");
    });
  }

  // On load: compute hrefs + paint the active pill
  (function init() {
    const path = location.pathname;
    const { isES, enHref, esHref } = buildTargets(path);
    const en = document.querySelector('.lang-switch [data-lang="en"]');
    const es = document.querySelector('.lang-switch [data-lang="es"]');
    if (en) en.setAttribute("href", enHref);
    if (es) es.setAttribute("href", esHref);
    paintActive(isES);
  })();

  // Optional: if a page lacks a translated twin, your server will 404. If you want to
  // fail back to home instead, uncomment this handler.
  // document.addEventListener("click", function (e) {
  //   const a = e.target.closest('.lang-switch a[data-lang]');
  //   if (!a) return;
  //   // let the real href navigate; no preventDefault → works even if JS dies
  // });
})();

</script>





</header>
