<header>
<script src="/assets/js/lang-switch.js" defer></script>
  <h1>Tito necesita un riñón</h1>
  <nav>
    <a href="/es/index.html">Inicio</a>
    <a href="/es/about.html">Sobre mí</a>
    <a href="/es/hub/index.html">Centro renal</a>
    <a href="/es/donor-info.html">Información para donantes</a>
    <a href="/es/donor-testimonials.html">Testimonios de donantes</a>
    <a href="/es/book.html">Libro</a>
  </nav>
<!-- Language switch: preserves current path, positions right, paints active -->
<div class="lang-switch" aria-label="Language">
  <a data-lang="en" href="/" class="chip">EN</a>
  <span aria-hidden="true" class="divider">/</span>
  <a data-lang="es" href="/es/" class="chip">ES</a>
</div>



<script>
/* Preserve-current-path switcher with robust normalization + active painting */
(function(){
  function norm(p){
    p = p || "/";
    // Keep explicit file paths; only normalize well-known index forms
    if (p === "/index.html") p = "/";
    if (p === "/es/index.html") p = "/es/";
    // collapse accidental doubles
    p = p.replace(/\/{2,}/g,"/");
    return p;
  }
  function stripEsPrefix(p){ return p.replace(/^\/es(\/|$)/,"/"); }

  var path = norm(location.pathname);
  var isES  = path.startsWith("/es/");
  var en    = document.querySelector('.lang-switch [data-lang="en"]');
  var es    = document.querySelector('.lang-switch [data-lang="es"]');

  if (en && es) {
    // Build hrefs that preserve the current page path
    // EN target: if you’re on /es/foo/bar.html → /foo/bar.html; otherwise stay put
    var enTarget = isES ? stripEsPrefix(path) : (path || "/");
    if (enTarget === "") enTarget = "/";

    // ES target: if you’re on /foo/bar.html → /es/foo/bar.html; if already ES, stay put
    var esTarget = isES ? path : (path === "/" ? "/es/" : "/es" + path);

    en.href = enTarget;
    es.href = esTarget;

    // Paint active pill
    var active = isES ? es : en;
    active.classList.add("active");
    active.setAttribute("aria-current","true");
  }

  // Optional: if you prefer JS-driven navigation, uncomment below.
  // document.addEventListener("click", function(e){
  //   var a = e.target.closest('.lang-switch a[data-lang]');
  //   if (!a) return;
  //   e.preventDefault();
  //   location.assign(a.getAttribute("href"));
  // });
})();
</script>





</header>

